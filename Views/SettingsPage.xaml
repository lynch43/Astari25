<?xml version="1.0" encoding="utf-8" ?>
<!--
  File used for:
  - Settings page layout with shared backgroundy
  - Simple centered panel that holds the title, difficulty picker, and buttons
  - Platform tweak: on Windows the inner panel is wider so the Picker fits comfortably
-->


<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:Astari25.ViewModels"
    x:Class="Astari25.Views.SettingsPage">

    <!-- Bind to SettingsViewModel for Difficulty + Save/Reload -->
    <ContentPage.BindingContext>
        <vm:SettingsViewModel />
    </ContentPage.BindingContext>

    <Grid>
        <!-- Fullscreen background image -->
        <Image
            Source="background.jpg"
            Aspect="AspectFill"
            HorizontalOptions="Fill"
            VerticalOptions="Fill"
            InputTransparent="True" />

        <!-- Dim overlay for readability -->
        <BoxView
            Color="Black"
            Opacity="0.7"
            HorizontalOptions="Fill"
            VerticalOptions="Fill" />

        <!-- Centered content panel (width adjusted per platform) -->
        <Grid Padding="24">
            <VerticalStackLayout
                Spacing="20"
                Padding="24"
                BackgroundColor="Black"
                Opacity="0.80"
                HorizontalOptions="Center"
                WidthRequest="{OnPlatform WinUI=860, Android=360, iOS=360}">

                <!-- Title -->
                <Label
                    Text="Settings"
                    FontSize="44"
                    FontAttributes="Bold"
                    TextColor="White"
                    HorizontalTextAlignment="Center" />

                <!-- Field label -->
                <Label
                    Text="Difficulty"
                    HorizontalOptions="Center"
                    FontSize="20"
                    TextColor="White" />

                <!-- Difficulty picker - Settings.Difficulty -->
                <Picker
                    Title="Select"
                    FontSize="22"
                    
                    HeightRequest="75"
                    WidthRequest="360"
                    BackgroundColor="DimGray"
                    TextColor="White"
                    TitleColor="White"
                    SelectedItem="{Binding Settings.Difficulty}">
                    <Picker.Items>
                        <x:String>Easy</x:String>
                        <x:String>Normal</x:String>
                        <x:String>Hard</x:String>
                    </Picker.Items>
                </Picker>

                <!-- Actions -->
                <!-- Save Button saves the difficulty into prefernces. it will persist on restart-->
                <Button
                    Text="Save"
                    Command="{Binding SaveCommand}"
                    HeightRequest="56"
                    WidthRequest="400"
                    BackgroundColor="Blue"
                    TextColor="White" />
                
                <!-- Reload Button will Revert back to Default info-->
                <Button
                    Text="Reload"
                    Command="{Binding ReloadCommand}"
                    HeightRequest="56"
                    WidthRequest="400"
                    BackgroundColor="Gray"
                    TextColor="White" />
            </VerticalStackLayout>
        </Grid>
    </Grid>
</ContentPage>
